def main():
    # Game initialization
    map = Map(grid_size=100)
    player1 = Player(player_id=1, name='Player 1')
    player2 = Player(player_id=2, name='Player 2')
    game = Game(map=map, players=[player1, player2])
    game.start_game()

    while not game.is_game_over():
        # Player turn
        current_player = game.players[game.current_turn]
        current_player.send_message("It's your turn!")
        while True:
            command = input("Type 'move' to move your unit, 'attack' to attack an enemy, or 'research' to research a new technology: ")
            if command == 'move':
                target_position = input("Where do you want to move your unit? (e.g. '3,4') ")
                try:
                    x, y = [int(i) for i in target_position.split(',')]
                except ValueError:
                    print("Invalid target position. Try again.")
                    continue
                if map.is_move_valid((x, y)):
                    game.map.move_unit((current_player.unit_positions[0]), (x, y))
                    break
                else:
                    print("Invalid move. Try again.")
                    continue
            elif command == 'attack':
                target_position = input("Where do you want to attack? (e.g. '3,4') ")
                try:
                    x, y = [int(i) for i in target_position.split(',')]
                except ValueError:
                    print("Invalid target position. Try again.")
                    continue
                if map.is_move_valid((x, y)):
                    game.map.move_unit((current_player.unit_positions[0]), (x, y))
                    break
                else:
                    print("Invalid move. Try again.")
                    continue
            elif command == 'research':
                technology = input("Which technology do you want to
